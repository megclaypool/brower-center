package  {	import evdm.*;	import gs.*;    //import gs.easing.*;	//import gs.plugins.*;	//import gs.events.*;	import flash.ui.Mouse;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.net.navigateToURL;	import flash.utils.Timer;    import flash.events.TimerEvent;    import flash.display.Stage;	import flash.display.*;	import flash.events.*;		public class main_br extends Sprite{		//basic var		var rectShape:Shape;		var rectShape2:Shape;		var lastSelectedMain;		public var contentContainer:Sprite;		public var SSimgA:Sprite;		public var SSimgB:Sprite;		public var SSimgContainer:Sprite;		public var SSTextA:Sprite;		public var SSTextB:Sprite;		public var SSquoteContainer:Sprite;				var imgHolder_ON:uint = 1;		var imgHolder_FirstTimeThrough:Boolean = true;		var textHolder_ON:uint = 1;		var textHolder_FirstTimeThrough:Boolean = true;				//timers		var mySSImgTimer:Timer;		var mySSTextTimer:Timer;		var timerDuration:Number = 0 //5000;		var faderDuration:Number = 3.5;				//scale img		var imgScaler:Object;		var stageH:uint = stage.stageHeight;		var stageW:uint = stage.stageWidth;				//img loading		public var ih:SingleImgLoader = new SingleImgLoader;		public var SSDisplayObject_New:DisplayObject;		public var SSDisplayObject_Old:DisplayObject;		public var SSTextObject_New:DisplayObject;		public var SSTextObject_Old:DisplayObject;		public var contentObject:DisplayObject;                // @dave        // bg is slightly transparent black which goes behind RSS feeds		public var bg:Shape = new Shape();                // @dave        // mask to cover the RSS feeds        public var masker:Shape = new Shape();                         		//img arrays		var btnList:Array = [];		var imgList:Array = ["intro1.jpg","intro2.jpg","intro3.jpg","intro4.jpg","intro5.jpg","intro6.jpg","intro7.jpg"]; 		var textList:Array = ["text1.swf","emptyText.swf","text2.swf","emptyText.swf","text3.swf","emptyText.swf","text4.swf","emptyText.swf","text5.swf","emptyText.swf","text6.swf","emptyText.swf","text7.swf","emptyText.swf","text8.swf","emptyText.swf","text9.swf","emptyText.swf"];		var imgNum:uint = 0;		var textNum:uint = 0;				//stage items		var SS_OFF:Boolean = false;		public var _proNav:Object;        public var ProNav:proNav;		public var _btn1;		public var _btn2;		public var _btn3;		public var _btn4;		public var _btn5;		public var _btn6;				 public function main_br() {              			// Mouse.hide();                        // @dave            // supposedly you can't force flash fullscreen without the user triggering it on click            // so this won't work as is			// stage.displayState=StageDisplayState.FULL_SCREEN;                                       			_proNav = this.getChildByName("ProNav");			_btn1 = _proNav.getChildByName("Btn1");			_btn2 = _proNav.getChildByName("Btn2");			_btn3 = _proNav.getChildByName("Btn3");			_btn4 = _proNav.getChildByName("Btn4");			_btn5 = _proNav.getChildByName("Btn5");			_btn6 = _proNav.getChildByName("Btn6");			//btnItem						btnList = [_btn1,_btn2,_btn3,_btn4,_btn5,_btn6];						for (var i:uint = 0; i<btnList.length;i++){				btnList[i].addEventListener(MouseEvent.MOUSE_OVER, nav_Over);				btnList[i].addEventListener(MouseEvent.MOUSE_OUT, nav_Out);				btnList[i].buttonMode = true;			}				_btn1.addEventListener(MouseEvent.MOUSE_UP, btn1_UP);				_btn2.addEventListener(MouseEvent.MOUSE_UP, btn2_UP);				_btn3.addEventListener(MouseEvent.MOUSE_UP, btn3_UP);				_btn4.addEventListener(MouseEvent.MOUSE_UP, btn4_UP);				_btn5.addEventListener(MouseEvent.MOUSE_UP, btn5_UP);				_btn6.addEventListener(MouseEvent.MOUSE_UP, btn6_UP);			 lastSelectedMain = _btn1;                       // @dave black background behind RSS             bg.graphics.beginFill(0x000000,.9);            bg.graphics.drawRect(0,0,1920,648);            addChild(bg);            bg.y = 264;            bg.visible = false;                        // @dave mask for RSS             masker.graphics.beginFill(0x000000,1);            masker.graphics.drawRect(0,0,1920,584);            addChild(masker);            masker.y = 284;        			contentContainer = new Sprite;			addChild(contentContainer);			            // @dave			contentContainer.mask=masker;                                    			rectShape = new Shape();			rectShape.graphics.beginFill(0x000000);			rectShape.graphics.drawRect(0,0,1920,888);			rectShape.graphics.endFill();			rectShape.alpha=.65;			rectShape2 = new Shape();			rectShape2.graphics.beginFill(0x000000);			rectShape2.graphics.drawRect(0,0,1920,888);			rectShape2.graphics.endFill();			rectShape2.alpha=.65;						SSimgContainer = new Sprite;			addChild(SSimgContainer);			SSimgA = new Sprite;			SSimgContainer.addChild(SSimgA);			SSimgB = new Sprite;			SSimgContainer.addChild(SSimgB);						SSquoteContainer = new Sprite;			addChild(SSquoteContainer);			SSTextA = new Sprite;			SSquoteContainer.addChild(SSTextA);			SSTextA.addChild(rectShape);			SSTextA.alpha=0;						SSTextB = new Sprite;			SSquoteContainer.addChild(SSTextB);			//SSTextB.addChild(rectShape2);			SSTextB.alpha=0;						setChildIndex(SSquoteContainer,0);			setChildIndex(SSimgContainer,0);  			/*SSimgA.alpha = 0;			SSimgB.alpha = 0;			SSquoteA.alpha = 0;			SSquoteB.alpha = 0;*/						playSlideShow();            			/*// set default bg img			ih = new SingleImgLoader(); //ih = imageHolder			ih.loadSingleImage("images/" + imgList[imgNum], true);            SSimgContainer.setChildIndex(SSimgA,0);						SSimgB.addChild(ih);						ih.alpha=0;						imgHolder_ON=1;						TweenMax.to(ih, faderDuration, {alpha:1,onComplete:startTimerOver});						//imgHolder_FirstTimeThrough=false;            */		 }//********************************************************************************// SCALE IMG//********************************************************************************			function setBGimg(event:Event):void{				//set bg img size				if (imgScaler.height!=stageH){ 				imgScaler.height=stageH;				imgScaler.scaleX=imgScaler.scaleY;}				if(imgScaler.width<stageW){ 				imgScaler.width=stageW;				imgScaler.scaleY=imgScaler.scaleX;}				}//********************************************************************************// SlideShow Timers (SS)//********************************************************************************			function stopSlideShow(){				//set bg img size				mySSImgTimer.reset();				mySSTextTimer.reset();				}			function playSlideShow(){				//set bg img size                				//img timer				mySSImgTimer = new Timer(timerDuration, 1);				mySSImgTimer.addEventListener(TimerEvent.TIMER, runImgSlideShow);				mySSImgTimer.start();								// timer when instantiated is set to "0" so that the 1st img loads immediatly				//then it is reverted back to it's proper timer speed.				timerDuration = 5000;								// text timer				mySSTextTimer = new Timer(timerDuration, 1);				mySSTextTimer.addEventListener(TimerEvent.TIMER, runTextSlideShow);				// text timer started after the image is loaded, so that they time independently. 				//For this reason it is turned off here				//mySSTextTimer.start();				}//********************************************************************************// Img (SS)//********************************************************************************			function runImgSlideShow(e:TimerEvent):void{					mySSImgTimer.reset();					ih = new SingleImgLoader(); //ih = imageHolder					ih.loadSingleImage("images/" + imgList[imgNum], true);					//SSDisplayObject_New = ih;					//imgScaler = ih;					//trace ("loadSS");					if (imgHolder_ON == 1){						//trace ("imgNum1 = " + imgNum);						if (imgHolder_FirstTimeThrough == false){							//trace ("SSDisplayObject_Old = " + SSDisplayObject_Old);							SSimgA.removeChild(SSDisplayObject_Old);							SSDisplayObject_Old = SSDisplayObject_New;						}												SSimgContainer.setChildIndex(SSimgB,0);						SSimgA.addChild(ih);						ih.alpha=0;						ih.y=50;						imgHolder_ON=2;						TweenMax.to(ih, faderDuration, {alpha:1,onComplete:startTimerOver});										} else {						//trace ("imgNum2 = " + imgNum);					if (imgHolder_FirstTimeThrough == false){							SSimgB.removeChild(SSDisplayObject_Old);						}						imgHolder_FirstTimeThrough = false;						SSDisplayObject_Old = SSDisplayObject_New;						SSimgContainer.setChildIndex(SSimgA,0);						SSimgB.addChild(ih);						ih.alpha=0;						ih.y=50;						imgHolder_ON=1;						TweenMax.to(ih, faderDuration, {alpha:1,onComplete:startTimerOver});					}					imgNum++					if (imgNum == imgList.length){						imgNum = 0;					}					SSDisplayObject_New = ih;  				}			function startTimerOver(){				//trace("timer start");				//mySSImgTimer.start();				mySSTextTimer.start();			}//********************************************************************************// Text (SS)//********************************************************************************			function runTextSlideShow(e:TimerEvent):void{					mySSTextTimer.reset();					ih = new SingleImgLoader();					ih.loadSingleImage("text/" + textList[textNum], false);					//SSDisplayObject_New = ih;					//imgScaler = ih;					//trace ("loadSS");					if (textHolder_ON == 1){						//trace ("textNum = " + textNum);						if (textHolder_FirstTimeThrough == false){							//trace ("SSDisplayObject_Old = " + SSTextObject_Old);							SSTextA.removeChild(SSTextObject_Old);							SSTextObject_Old = SSTextObject_New;							TweenMax.to(SSTextB, faderDuration, {alpha:0});						}												SSquoteContainer.setChildIndex(SSTextB,0);						SSTextA.addChild(ih);						//SSTextA.alpha=0;						textHolder_ON=2;						TweenMax.to(SSTextA, faderDuration, {alpha:1,onComplete:startTextTimerOver});																} else {					//trace ("textNum2 = " + textNum);					if (textHolder_FirstTimeThrough == false){							SSTextB.removeChild(SSTextObject_Old);						}						//trace ("error");						textHolder_FirstTimeThrough = false;						SSTextObject_Old = SSTextObject_New;						SSquoteContainer.setChildIndex(SSTextA,0);						SSTextB.addChild(ih);						//SSTextB.alpha=0;						textHolder_ON=1;						TweenMax.to(SSTextA, faderDuration, {alpha:0});						TweenMax.to(SSTextB, faderDuration, {alpha:1,onComplete:startTextTimerOver});					}					textNum++					if (textNum == textList.length){						textNum = 0;					}					SSTextObject_New = ih;  				}			function startTextTimerOver(){				//trace("timer start");				//mySSTextTimer.start();				mySSImgTimer.start();			}                                                // @dave            // this is where i'm stopping the quotes            function killSSQuoteContainer()            {                SSquoteContainer.visible = false;                mySSTextTimer.stop();                             }			function openSSQuoteContainer()            {                SSquoteContainer.visible = true;                mySSTextTimer.start();                             }//********************************************************************************// NAV BTN FUNCTIONS//********************************************************************************				function nav_Over(e:MouseEvent){			 if (e.currentTarget != lastSelectedMain){				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xb9da00});			 }		}		function nav_Out(e:MouseEvent){			if (e.currentTarget != lastSelectedMain){				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});			 }		}                        		function btn1_UP(e:MouseEvent):void {			if (e.currentTarget != lastSelectedMain){				lastSelectedMain = e.currentTarget;				if(contentContainer.contains(contentObject))				 contentContainer.removeChild(contentObject);				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});				SS_OFF = false;								//open quote container again								SSquoteContainer.visible = true;				if(SSquoteContainer.alpha<.9)                TweenMax.to(SSquoteContainer, 0, {alpha:1,onComplete:openSSQuoteContainer});                                // @dave                // turn back on quotes                SSquoteContainer.visible = true;                playSlideShow();                                // @dave                // fade out black bg                TweenMax.killTweensOf(bg);                TweenMax.to(bg, 2, {alpha:0});                TweenMax.to(bg, 2, {visible:false,delay:2});                				}			}                                              		///		/// Keep in mind this is for a touch screen, touchscreen functionality applies		/// This button should be your test button. I would suggest loading all your content into a 		/// MC that gets loaded into the "contentContainer" and calling it "contentObject"		/// This will make sure the code works when the slideshow starts back up. 		///		function btn2_UP(e:MouseEvent):void         {			if (e.currentTarget != lastSelectedMain){				if (SS_OFF == true){					// if the slideshow is off then that means a button is selected and that 					// buttons content is in the container, this checks and removes the last buttons contents. 					// If the slideshow is on, then there are no contents to remove                    if(contentContainer.contains(contentObject))					contentContainer.removeChild(contentObject);				}				// turn the slideshow off				SS_OFF = true;				// sets the active button so it can be pressed again				lastSelectedMain = e.currentTarget;				// changes the button color				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});				// you may need to add a black MC to the background to your text for it to be legible, see the sample swf or publish to see what I mean. The black BG should cover the whole BG and you can reuse the MC used to make the slightly transparent black background (rectShape) for the text on the slideshow transitions				//contentContainer.addChild(rectShape); //etc				                // @dave                 // use sample.xml to test locally				// new RSS feed                				 //var textBlock:RssText = new RssText("sample.xml");				 var textBlock:RssText = new RssText("http://www.browercenter.org/single/feed/1");                contentContainer.addChild(textBlock);                textBlock.y = 284;				contentObject = textBlock;                               // @dave                 //stop the quote timer                if(SSquoteContainer.alpha>.9)                TweenMax.to(SSquoteContainer, 1, {alpha:0,onComplete:killSSQuoteContainer});                                // @dave                 // fade up black bg                TweenMax.killTweensOf(bg);                bg.visible = true;                if(bg.alpha<1)                TweenMax.to(bg, 1, {alpha:1});                                   				}		}                                                                                                                        		function btn3_UP(e:MouseEvent):void {			var request:URLRequest=new URLRequest("http://buildingdashboard.com/clients/brower/kiosk/index.php?mode=kiosk");			navigateToURL(request, "_self");			TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});                                                			}		function btn4_UP(e:MouseEvent):void {			if (e.currentTarget != lastSelectedMain){				if (SS_OFF == true){					if(contentContainer.contains(contentObject))					contentContainer.removeChild(contentObject);				}				SS_OFF = true;				lastSelectedMain = e.currentTarget;				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});				                 // @dave                // new RSS feed 				var textBlock:RssText = new RssText("http://www.browercenter.org/tenants/feed");                contentContainer.addChild(textBlock);                textBlock.y = 284;				contentObject = textBlock;                                // @dave                //stop the quote timer                if(SSquoteContainer.alpha>.9)                TweenMax.to(SSquoteContainer, 1, {alpha:0,onComplete:killSSQuoteContainer});                                // @dave                 // fade up black bg                TweenMax.killTweensOf(bg);                bg.visible = true;                if(bg.alpha<1)                TweenMax.to(bg, 1, {alpha:1});                				}			}                        		function btn5_UP(e:MouseEvent):void {			if (e.currentTarget != lastSelectedMain){				if (SS_OFF == true){					if(contentContainer.contains(contentObject))					contentContainer.removeChild(contentObject);				}				SS_OFF = true;				lastSelectedMain = e.currentTarget;				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});                // @dave                // new RSS feed		var textBlock:RssText = new RssText("http://www.browercenter.org/taxonomy/term/11/0/feed");                contentContainer.addChild(textBlock);                textBlock.y = 284;				contentObject = textBlock;                // @dave                //stop the quote timer                if(SSquoteContainer.alpha>.9)                TweenMax.to(SSquoteContainer, 1, {alpha:0,onComplete:killSSQuoteContainer});                                // @dave                 // fade up black bg                TweenMax.killTweensOf(bg);                bg.visible = true;                if(bg.alpha<1)                TweenMax.to(bg, 1, {alpha:1});				}			}                                    		function btn6_UP(e:MouseEvent):void {			if (e.currentTarget != lastSelectedMain){				if (SS_OFF == true){					if(contentContainer.contains(contentObject))					contentContainer.removeChild(contentObject);				}				SS_OFF = true;				lastSelectedMain = e.currentTarget;				TweenMax.to(e.currentTarget.btnItem, 1, {tint:0xFFFFFF});				                // @dave                // new RSS feed	 var textBlock:RssText = new RssText("http://www.browercenter.org/single/feed/179");                contentContainer.addChild(textBlock);                textBlock.y = 284;				contentObject = textBlock;                                // @dave                //stop the quote timer                if(SSquoteContainer.alpha>.9)                TweenMax.to(SSquoteContainer, 1, {alpha:0,onComplete:killSSQuoteContainer});                                // @dave                 // fade up black bg                TweenMax.killTweensOf(bg);                bg.visible = true;                if(bg.alpha<1)                TweenMax.to(bg, 1, {alpha:1});                				}			}			}}